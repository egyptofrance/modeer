# توثيق حسابات الموظفين والأدوار والصلاحيات

## التاريخ
19 نوفمبر 2025

## المؤلف
Manus AI

## الملخص
هذا المستند يحتوي على جميع المعلومات اللازمة لإدارة حسابات الموظفين والأدوار والصلاحيات في نظام **Modeer**.

---

## 1. كيفية إنشاء موظف جديد (خطوات يدوية)

نظراً لأن إنشاء المستخدمين يتطلب صلاحيات `supabase_auth_admin`، يجب تنفيذ هذه الخطوات من خلال Supabase Dashboard.

### الخطوة 1: إنشاء مستخدم جديد

1. اذهب إلى **Supabase Dashboard → Authentication**
2. اضغط على **Add User**
3. أدخل **Email** و **Password**
4. اضغط **Create User**
5. انسخ **User ID** الذي تم إنشاؤه

### الخطوة 2: ربط المستخدم بالموظف

1. اذهب إلى **SQL Editor**
2. نفذ الاستعلام التالي (مع استبدال القيم):

```sql
SELECT create_employee_after_signup(
    -- الصق User ID هنا
    -- مثال: 'a1b2c3d4-e5f6-7890-1234-567890abcdef'
    'USER_ID_HERE',
    
    -- اختر نوع الموظف من القائمة
    -- (مدير عام, مدير قسم فني, موظف كول سنتر, مراقبة الجودة, سائق, مندوب, فني صيانة, موظف ريسبشن)
    'نوع الموظف هنا',
    
    -- اسم الموظف بالكامل
    'اسم الموظف هنا',
    
    -- رقم الهاتف
    'رقم الهاتف هنا',
    
    -- البريد الإلكتروني (نفس بريد المستخدم)
    'البريد الإلكتروني هنا',
    
    -- الراتب الأساسي (اختياري، الافتراضي 5000)
    5000.00
);
```

---

## 2. قائمة حسابات الموظفين

| الاسم الكامل       | البريد الإلكتروني                | كلمة المرور      | الدور              | مستوى الصلاحية |
| ------------------ | -------------------------------- | ----------------- | ----------------- | -------------- |
| **أميرة الشافعي**  | `amira.elshafei@modeer.com`      | `Amira@2025`      | مدير عام          | 90             |
| **أسامة ميخائيل**  | `osama.mikhail@modeer.com`       | `Osama@2025`      | مدير قسم فني      | 80             |
| **محمد الدسوقي**  | `mohamed.eldesoky@modeer.com`    | `Mohamed@2025`    | مدير قسم فني      | 80             |
| **سمية**           | `somaya@modeer.com`              | `Somaya@2025`     | مراقبة الجودة     | 70             |
| **فادي**           | `fady@modeer.com`                | `Fady@2025`       | موظف كول سنتر     | 50             |
| **أسامة**         | `osama.cc@modeer.com`            | `OsamaCC@2025`    | موظف كول سنتر     | 50             |
| **يوسف**           | `youssef@modeer.com`             | `Youssef@2025`    | موظف كول سنتر     | 50             |
| **عبد الرحمن**    | `abdelrahman@modeer.com`         | `Abdelrahman@2025`| مندوب مبيعات      | 40             |
| **أدهم**          | `adham@modeer.com`               | `Adham@2025`      | فني صيانة         | 40             |
| **هاني**           | `hany@modeer.com`                | `Hany@2025`       | سائق              | 30             |

---

## 3. روابط الصفحات لكل دور

| الدور              | الرابط الرئيسي                               | صفحات إضافية                                                                                               |
| ----------------- | --------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| **مدير عام**      | `/admin/dashboard`                            | جميع صفحات `/admin/*`                                                                                       |
| **مدير قسم فني**  | `/admin/dashboard`                            | صفحات `/admin/employees`, `/admin/vehicles`, `/admin/reports`                                               |
| **مراقبة الجودة**  | `/quality-control/calls`                      | -                                                                                                           |
| **موظف كول سنتر**  | `/employee/call-center`                       | `/employee/profile`, `/employee/leave`                                                                      |
| **سائق**           | `/driver/my-vehicle`                          | `/driver/documents`, `/employee/profile`                                                                    |
| **مندوب مبيعات**   | `/employee/dashboard` (لم يتم إنشاؤها بعد) | `/employee/profile`, `/employee/leave`                                                                      |
| **فني صيانة**     | `/employee/dashboard` (لم يتم إنشاؤها بعد) | `/employee/profile`, `/employee/leave`                                                                      |

---

## 4. الصلاحيات التفصيلية

### مدير عام (level 90)
- ✅ عرض جميع البيانات في النظام
- ✅ إنشاء وتعديل وحذف جميع البيانات (موظفين، سيارات، إلخ)
- ✅ الوصول إلى جميع التقارير والإحصائيات

### مدير قسم فني (level 80)
- ✅ عرض بيانات القسم الفني (فنيين، سيارات)
- ✅ إدارة مهام الفنيين
- ✅ عرض تقارير القسم الفني

### مراقبة الجودة (level 70)
- ✅ عرض جميع سجلات المكالمات
- ✅ تقييم المكالمات
- ✅ عرض تقارير جودة المكالمات

### موظف كول سنتر (level 50)
- ✅ تسجيل بيانات العملاء الجدد
- ✅ تسجيل المكالمات
- ✅ عرض بيانات العملاء

### سائق (level 30)
- ✅ عرض بيانات سيارته
- ✅ تسجيل قراءات العداد
- ✅ تسجيل التعبئة والصيانة
- ✅ رفع وثائق السيارة والسائق

---

## 5. المرفقات

- `create_employee_accounts.sql`: ملف SQL يحتوي على دالة `create_employee_after_signup` للمساعدة في إنشاء الموظفين.

## 6. الملاحظات

- **كلمات المرور:** جميع كلمات المرور مؤقتة ويجب على الموظفين تغييرها بعد أول تسجيل دخول.
- **الأمان:** تم تطبيق Row Level Security (RLS) على جميع الجداول لضمان عدم وصول أي موظف لبيانات لا تخصه.
- **التطوير المستقبلي:** يمكن إضافة صلاحيات أكثر تفصيلاً باستخدام جدول `workspace_permissions` إذا لزم الأمر.
