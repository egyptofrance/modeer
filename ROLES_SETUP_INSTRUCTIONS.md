# تعليمات إعداد الأدوار والصلاحيات

## الخطوة 1: تنفيذ SQL في Supabase

1. افتح [Supabase Dashboard](https://supabase.com/dashboard)
2. اختر المشروع الخاص بك
3. اذهب إلى **SQL Editor** من القائمة الجانبية
4. افتح ملف `roles_and_permissions_update.sql`
5. انسخ المحتوى بالكامل
6. الصقه في SQL Editor
7. اضغط **Run** أو **F5**

## الخطوة 2: التحقق من النجاح

بعد التنفيذ، قم بتشغيل هذا الاستعلام للتحقق:

```sql
-- التحقق من أنواع الموظفين
SELECT * FROM public.employee_types ORDER BY code_prefix;

-- التحقق من ربط الأدوار
SELECT 
    et.name as employee_type,
    et.code_prefix,
    etr.app_role
FROM public.employee_types et
LEFT JOIN public.employee_type_roles etr ON et.id = etr.employee_type_id
ORDER BY et.code_prefix;
```

يجب أن ترى:
- ✅ 8 أنواع موظفين (بما فيهم Quality Control)
- ✅ كل نوع موظف مربوط بدور

## الخطوة 3: إبلاغي بالنتيجة

بعد التنفيذ، أخبرني:
- ✅ "تم التنفيذ بنجاح" - إذا نجح كل شيء
- ❌ "حدث خطأ: [نص الخطأ]" - إذا ظهر خطأ

## ما سيحدث بعد ذلك

بعد تأكيد نجاح التنفيذ، سأقوم بـ:

1. **إنشاء الصفحات الناقصة:**
   - صفحة السائق (رفع الوثائق، تسجيل الرحلات، إلخ)
   - صفحة Quality Control (مراقبة المكالمات)
   - تحديث صفحات الأدوار الأخرى

2. **إنشاء حسابات الموظفين:**
   - أميرة الشافعي (مدير عام)
   - أسامة ميخائيل (مدير فني)
   - محمد الدسوقي (مدير فني)
   - فادي (كول سنتر)
   - أسامة (كول سنتر)
   - يوسف (كول سنتر)
   - سمية (Quality Control)
   - هاني (سائق)
   - عبد الرحمن (مندوب)
   - أدهم (فني)

3. **توثيق كامل:**
   - جدول بجميع الحسابات (Username/Email + Password)
   - روابط الصفحات لكل دور
   - الصلاحيات التفصيلية لكل دور
