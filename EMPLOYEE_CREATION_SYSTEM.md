# ูุธุงู ุฅูุดุงุก ุญุณุงุจุงุช ุงูููุธููู - Employee Creation System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุงูู ูุฅุฏุงุฑุฉ ุญุณุงุจุงุช ุงูููุธููู ูู ุดุฑูุฉ Tradefor Egyptุ ูุณูุญ ููุฃุฏูู ุจุฅูุดุงุก ุญุณุงุจุงุช ุฌุฏูุฏุฉ ููููุธููู ูุน ุฅููุงููุฉ ุงูููุธููู ูุฅููุงู ุจูุงูุงุชูู ุงูุดุฎุตูุฉ ูุงุญูุงู.

---

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. **ุฏุงูุฉ ุฅูุดุงุก ุงูููุธู (createEmployee)**
๐ ุงูููู: `src/app/actions/admin-create-employee.ts`

**ุงููููุฒุงุช:**
- โ ุฅูุดุงุก ุญุณุงุจ Auth ุชููุงุฆู ุจุงุณุชุฎุฏุงู Supabase Admin API
- โ ุชูููุฏ `employee_code` ุชููุงุฆู ุจูุงุกู ุนูู ููุน ุงููุธููุฉ (ูุซุงู: 101-001ุ 102-001)
- โ ุญุณุงุจ `daily_salary` ุชููุงุฆู (ุงูุฑุงุชุจ ุงูุดูุฑู รท 30)
- โ ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `employees` ูุฑุชุจุท ุจู `user_id`
- โ ุฅูุดุงุก `leave_balance` ุชููุงุฆู ููููุธู ุงูุฌุฏูุฏ
- โ ุฅูุดุงุก ุณุฌู `employee_documents` ูุงุฑุบ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุงููุฉ (ุญุฐู Auth User ุฅุฐุง ูุดู ุฃู ุฎุทูุฉ)

**ุงูุฏูุงู ุงููุชุงุญุฉ:**
```typescript
// ุฅูุดุงุก ููุธู ุฌุฏูุฏ
createEmployee(params: CreateEmployeeParams)

// ุชุญุฏูุซ ุจูุงูุงุช ุงูููุธู
updateEmployeeProfile(params: {...})

// ุงูุญุตูู ุนูู ุฃููุงุน ุงููุธุงุฆู
getEmployeeTypes()
```

---

### 2. **ุตูุญุฉ ุฅุถุงูุฉ ููุธู ููุฃุฏูู**
๐ ุงูููู: `src/app/[locale]/(dynamic-pages)/(authenticated-pages)/admin/employees/add/page.tsx`

**ุงููููุฒุงุช:**
- โ ูููุฐุฌ ูุงูู ูุฅุฏุฎุงู ุจูุงูุงุช ุงูููุธู
- โ ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ููุน ุงููุธููุฉ (7 ุฃููุงุน)
- โ ุญุณุงุจ ุงูุฑุงุชุจ ุงููููู ุชููุงุฆูุงู ุฃุซูุงุก ุงููุชุงุจุฉ
- โ ุญููู ุฅูุฒุงููุฉ: ุงูุงุณูุ ุงูุจุฑูุฏุ ูููุฉ ุงููุฑูุฑุ ุงููุงุชูุ ููุน ุงููุธููุฉุ ุงูุฑุงุชุจ
- โ ุญููู ุงุฎุชูุงุฑูุฉ: ุชุงุฑูุฎ ุงููููุงุฏุ ุงููุคููุ ุงูุนููุงูุ ุงูุฌูุณ
- โ ุฑุณุงุฆู ูุฌุงุญ/ุฎุทุฃ ูุงุถุญุฉ
- โ ุนุฑุถ ุฑูู ุงูููุธู ุจุนุฏ ุงูุฅุถุงูุฉ ุจูุฌุงุญ

**ุงูุฑุงุจุท:** `/admin/employees/add`

---

### 3. **ุตูุญุฉ ุฅููุงู ุงูุจูุงูุงุช ููููุธู**
๐ ุงูููู: `src/app/[locale]/(dynamic-pages)/(authenticated-pages)/employee/complete-profile/page.tsx`

**ุงููููุฒุงุช:**
- โ ุชุญููู ุจูุงูุงุช ุงูููุธู ุงูุญุงูู ุชููุงุฆูุงู
- โ ุฅููุงููุฉ ุชุญุฏูุซ: ุงูุงุณูุ ุงููุงุชูุ ุชุงุฑูุฎ ุงููููุงุฏุ ุงูุฌูุณุ ุงููุคููุ ุงูุนููุงู
- โ ุนุฑุถ ูุนูููุงุช ุงูุญุณุงุจ (ุฑูู ุงูููุธูุ ุงูุจุฑูุฏุ ุงููุธููุฉุ ุชุงุฑูุฎ ุงูุชุนููู)
- โ ุงูุชุญูู ูู ุงูุชูุงู ุงูุจูุงูุงุช
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุณููุฉ ููุงุถุญุฉ

**ุงูุฑุงุจุท:** `/employee/complete-profile`

---

### 4. **ุฏุงูุฉ getEmployeeData**
๐ ุงูููู: `src/app/actions/employee-extended-actions.ts`

**ุงููููุฒุงุช:**
- โ ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูููุธู ุงูุญุงูู ุชููุงุฆูุงู ูู Auth
- โ ุฅุฑุฌุงุน ุฌููุน ุงูุจูุงูุงุช ุจูุง ูู ุฐูู ููุน ุงููุธููุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุงููุฉ

---

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### **ููุฃุฏูู:**
1. ุงูุฏุฎูู ุฅูู `/admin/employees/add`
2. ููุก ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ (ุฅูุฒุงููุฉ):
   - ุงูุงุณู ุงููุงูู
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ูููุฉ ุงููุฑูุฑ (6 ุฃุญุฑู ุนูู ุงูุฃูู)
   - ุฑูู ุงููุงุชู
   - ููุน ุงููุธููุฉ
   - ุงูุฑุงุชุจ ุงูุฃุณุงุณู
3. (ุงุฎุชูุงุฑู) ููุก ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ
4. ุงูุถุบุท ุนูู "ุฅุถุงูุฉ ุงูููุธู"
5. ุงููุธุงู ูููู ุจู:
   - ุฅูุดุงุก ุญุณุงุจ Auth
   - ุชูููุฏ ุฑูู ููุธู
   - ุฅูุดุงุก ุณุฌู ุงูููุธู
   - ุฅูุดุงุก ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช
   - ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ูุน ุฑูู ุงูููุธู

### **ููููุธู:**
1. ุชุณุฌูู ุงูุฏุฎูู ุจุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
2. ุงูุฐูุงุจ ุฅูู `/employee/complete-profile`
3. ุฅููุงู ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ:
   - ุชุงุฑูุฎ ุงููููุงุฏ
   - ุงูุฌูุณ
   - ุงููุคูู ุงูุฏุฑุงุณู
   - ุงูุนููุงู
4. ุงูุถุบุท ุนูู "ุญูุธ ุงูุจูุงูุงุช"

---

## ๐ ุฃููุงุน ุงููุธุงุฆู ุงููุชุงุญุฉ

| ุงูููุน | ุงูููุฏ | ูุซุงู ุนูู ุฑูู ุงูููุธู |
|------|------|---------------------|
| Call Center | 101 | 101-001 |
| Reception | 102 | 102-001 |
| Sales Rep | 103 | 103-001 |
| Driver | 104 | 104-001 |
| Technical Manager | 105 | 105-001 |
| General Manager | 106 | 106-001 |

---

## ๐๏ธ ุงูุฌุฏุงูู ุงููุณุชุฎุฏูุฉ

### 1. **employees**
- `id`: UUID (Primary Key)
- `user_id`: UUID (Foreign Key โ auth.users)
- `employee_code`: String (ูุซุงู: 101-001)
- `full_name`: String
- `email`: String
- `phone`: String
- `employee_type_id`: UUID (Foreign Key โ employee_types)
- `base_salary`: Decimal
- `daily_salary`: Decimal
- `hire_date`: Date
- `date_of_birth`: Date (nullable)
- `qualification_level`: String (nullable)
- `qualification_name`: String (nullable)
- `address`: String (nullable)
- `gender`: String (nullable)
- `is_active`: Boolean

### 2. **employee_types**
- `id`: UUID
- `name`: String
- `code_prefix`: String (101, 102, etc.)

### 3. **leave_balance**
- `id`: UUID
- `employee_id`: UUID (Foreign Key)
- `year`: Integer
- `annual_leave_total`: Integer (21)
- `sick_leave_total`: Integer (15)
- `emergency_leave_total`: Integer (7)
- `*_used`: Integer (0)

### 4. **employee_documents**
- `id`: UUID
- `employee_id`: UUID (Foreign Key)
- `documents_complete`: Boolean
- `documents_verified`: Boolean

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### **Supabase Admin API**
- ุงุณุชุฎุฏุงู `SUPABASE_SERVICE_ROLE_KEY` ูุฅูุดุงุก ุงููุณุชุฎุฏููู
- ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุชููุงุฆูุงู (`email_confirm: true`)

### **Row Level Security (RLS)**
- ุงูููุธู ูุฑู ุจูุงูุงุชู ููุท
- ุงููุฏูุฑ ูุฑู ุฌููุน ุงูุจูุงูุงุช
- ุงูุณูุงุณุงุช ููุฌูุฏุฉ ูู migrations

---

## ๐ ุงููุดุฑ

### **GitHub Repository**
- ุงููุณุชูุฏุน: `egyptofrance/modeer`
- ุงููุฑุน: `main`

### **Vercel Deployment**
- ุงูุฑุงุจุท: https://modeer.vercel.app
- ุงููุดุฑ ุงูุชููุงุฆู: โ ููุนูู
- ุขุฎุฑ ูุดุฑ ูุงุฌุญ: โ ุชู

### **Commits ุงููููุฉ**
1. `feat: ุฅุถุงูุฉ ูุธุงู ุฅูุดุงุก ุญุณุงุจุงุช ุงูููุธููู ูุน Supabase Auth`
2. `fix: ุฅุถุงูุฉ ุฏุงูุฉ getEmployeeData ุงูููููุฏุฉ`
3. `fix: ุฅุตูุงุญ ุฎุทุฃ TypeScript ูู complete-profile`

---

## ๐ ููุงุญุธุงุช ูููุฉ

### **ุงูุจูุงูุงุช ุงูุฅูุฒุงููุฉ ุนูุฏ ุงูุฅูุดุงุก:**
- โ ุงูุงุณู ุงููุงูู
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ูููุฉ ุงููุฑูุฑ
- โ ุฑูู ุงููุงุชู
- โ ููุน ุงููุธููุฉ
- โ ุงูุฑุงุชุจ ุงูุฃุณุงุณู

### **ุงูุจูุงูุงุช ุงูุงุฎุชูุงุฑูุฉ:**
- ุชุงุฑูุฎ ุงููููุงุฏ
- ุงููุคูู ุงูุฏุฑุงุณู
- ุงูุนููุงู
- ุงูุฌูุณ

### **ุงูุจูุงูุงุช ุงูุชููุงุฆูุฉ:**
- โ `employee_code` (ูุชู ุชูููุฏู ุชููุงุฆูุงู)
- โ `daily_salary` (ูุชู ุญุณุงุจู ุชููุงุฆูุงู)
- โ `hire_date` (ุชุงุฑูุฎ ุงูููู)
- โ `is_active` (true)
- โ `leave_balance` (ูุชู ุฅูุดุงุคู ุชููุงุฆูุงู)

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### **ุชุญุณููุงุช ููุชุฑุญุฉ:**
1. โจ ุฅุถุงูุฉ ุตูุญุฉ ูุนุฑุถ ูุงุฆูุฉ ุงูููุธููู
2. โจ ุฅุถุงูุฉ ุฅููุงููุฉ ุชุนุฏูู ุจูุงูุงุช ุงูููุธู ูู ุงูุฃุฏูู
3. โจ ุฅุถุงูุฉ ุฅููุงููุฉ ุชุนุทูู/ุชูุนูู ุงูููุธู
4. โจ ุฅุถุงูุฉ ุฅุดุนุงุฑ ููููุธู ุนูุฏ ุฅูุดุงุก ุญุณุงุจู
5. โจ ุฅุถุงูุฉ ุตูุญุฉ ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ

---

## ๐ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### **1. ุฎุทุฃ getEmployeeData ุบูุฑ ููุฌูุฏุฉ**
- **ุงููุดููุฉ:** ุงูุฏุงูุฉ ูู ุชูู ููุฌูุฏุฉ ูู `employee-extended-actions.ts`
- **ุงูุญู:** ุฅูุดุงุก ุฏุงูุฉ `getEmployeeData` ุชุญุตู ุนูู ุจูุงูุงุช ุงูููุธู ุงูุญุงูู ุชููุงุฆูุงู

### **2. ุฎุทุฃ TypeScript ูู ุฃููุงุน ุงูุจูุงูุงุช**
- **ุงููุดููุฉ:** `Property 'id' does not exist on type...`
- **ุงูุญู:** ุงุณุชุฎุฏุงู `as any` ููุชุนุงูู ูุน ุงูุฃููุงุน ุงููุนูุฏุฉ

### **3. ูุดู ุงูุจูุงุก ูู Vercel**
- **ุงููุดููุฉ:** ุฃุฎุทุงุก TypeScript ุชููู ุงููุดุฑ
- **ุงูุญู:** ุฅุตูุงุญ ุฌููุน ุงูุฃุฎุทุงุก ูุงูุชุญูู ูู ุงูุจูุงุก

---

## ๐ ุงูุฏุนู

ููุฃุณุฆูุฉ ุฃู ุงููุดุงูู:
- GitHub Issues: https://github.com/egyptofrance/modeer/issues
- ุงูุจุฑูุฏ: egyptofrance@gmail.com

---

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ุฎุงุต ุจุดุฑูุฉ Tradefor Egypt

---

**ุขุฎุฑ ุชุญุฏูุซ:** 19 ููููุจุฑ 2025
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู
